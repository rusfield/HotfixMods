@using Microsoft.AspNetCore.Components.Routing
@inherits LayoutComponentBase

@inject NavigationManager NavigationManager

<MudThemeProvider IsDarkMode="true" Theme="_theme" />
<MudDialogProvider CloseOnEscapeKey="true"
                   DisableBackdropClick="false"
                   NoHeader="true"
                   MaxWidth="MaxWidth.ExtraSmall"
                   FullWidth="true"
                   CloseButton="true" />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar>
        <MudDynamicTabs Centered="true" Color="Color.Dark" Style="width:100%" TabPanelHeaderPosition="TabHeaderPosition.After">
            <Header>
                <MudTooltip Text="New">
                    <MudIconButton Icon="@Icons.Filled.Add" Style="color:white" OnClick="NewTab_Click" />
                </MudTooltip>
            </Header>
            <ChildContent>
                <MudTabPanel Text="Tab One">
                </MudTabPanel>
                <MudTabPanel Text="Tab Two">
                </MudTabPanel>
                <MudTabPanel Text="Tab Three">
                </MudTabPanel>
            </ChildContent>
        </MudDynamicTabs>
    </MudAppBar>
    <MudDrawer @bind-Open="@_menuOpen" Anchor="Anchor.Bottom" Elevation="1" Variant="@DrawerVariant.Temporary">
        <MudDrawerHeader>
            <MudText Typo="Typo.h6" Align="Align.Center" Style="width:100%">My App</MudText>
        </MudDrawerHeader>
        <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.Center" Spacing="3" Style="width:100%;">
            <MudIconButton Icon="@Icons.Filled.MonitorHeart" Color="Color.Inherit" Size="Size.Small" />
            <MudIconButton Icon="@Icons.Filled.Settings" Color="Color.Inherit" Size="Size.Small"  />
            <MudText Color="Color.Inherit" Typo="Typo.h5">|</MudText>
            <MudIconButton Icon="@Icons.Filled.FaceRetouchingNatural" Size="Size.Large" Color="Color.Inherit"  />
            <MudIconButton Icon="@Icons.Filled.Security" Color="Color.Inherit" Size="Size.Large"  />
            <MudIconButton Icon="@Icons.Filled.LocalFireDepartment" Color="Color.Inherit" Size="Size.Large"  />
            <MudIconButton Icon="@Icons.Filled.OutlinedFlag" Color="Color.Inherit" Size="Size.Large"  />

            <MudMenu ActivationEvent="@MouseEvent.MouseOver" AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.TopCenter">
                <ActivatorContent>
                    <MudIconButton Icon="@Icons.Filled.MoreHoriz" Color="Color.Inherit" Size="Size.Large" Style="pointer-events: none;" />
                </ActivatorContent>
                <ChildContent>
                    <MudMenuItem>Spell Visual Kits</MudMenuItem>
                    <MudMenuItem>Sound Kits</MudMenuItem>
                    <MudMenuItem>Anim Kits</MudMenuItem>
                    <MudMenuItem>Custom Hotfix</MudMenuItem>
                </ChildContent>
            </MudMenu>

            <MudText Color="Color.Inherit" Typo="Typo.h5">|</MudText>
            <MudText Color="Color.Inherit" Typo="Typo.subtitle2">Hotfix Mods</MudText>

        </MudStack>
    </MudDrawer>
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.Large" Class="my-16 pt-16">
            <ErrorBoundary>
                <ChildContent>
                    @Body
                </ChildContent>
                <ErrorContent>
                    <ExceptionContent />
                </ErrorContent>
            </ErrorBoundary>
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private MudTheme _theme = new();

    bool _menuOpen = true;

    void NewTab_Click()
    {
        _menuOpen = true;
    }

    void CloseTab_Click()
    {
        
    }
}