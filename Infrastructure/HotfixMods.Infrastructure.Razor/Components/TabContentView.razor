<MudGrid Class="mb-2 px-3">
    <MudItem xs="4" />
    <MudItem xs="4">
        <MudText Typo="Typo.h4" Align="Align.Center" Style="width:100%">
            @(Title)
        </MudText>
    </MudItem>
    <MudItem xs="4">
        <MudStack Row="true" Justify="Justify.FlexEnd">
            <MudButton Variant="Variant.Filled" Color="Color.Success" OnClick="New_Callback">
                New
            </MudButton>
        </MudStack>
    </MudItem>
</MudGrid>

<MudTable Items="@Data" Hover="true" Height="650px" @ref="@mudTableRef">
    <HeaderContent>
        <MudTh>@*Avatars*@</MudTh>
        <MudTh>NAME</MudTh>
        <MudTh>ID</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Avatar"><MudAvatar Elevation="6" Image="@($"{context.AvatarUrl}")" /></MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="Action">
            <MudStack Row="true" Justify="Justify.FlexEnd">
                <MudIconButton Size="Size.Small" Color="Color.Primary" Icon="@Icons.Material.Filled.Edit" OnClick="@(() => EditAsync(context))" />
                <MudIconButton Size="Size.Small" Color="Color.Error" Icon="@Icons.Material.Filled.Delete" OnClick="@(() => DeleteAsync_Click(context))" />
            </MudStack>
        </MudTd>
    </RowTemplate>
    <NoRecordsContent>
        <MudText>There are no @Title yet.</MudText>
    </NoRecordsContent>
    <PagerContent>
        <MudPaper Class="d-flex flex-column align-center">
            <MudPagination Variant="Variant.Text" Color="Color.Info" Count="@pages" Class="@($"ma-2{(pages > 1 ? "" : " invisible")}")" SelectedChanged="PageChanged" />
        </MudPaper>
    </PagerContent>
</MudTable>

@code {
    [Parameter]
    public string Title { get; set; }
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public List<DashboardModel> Data { get; set; }

    [Parameter]
    public EventCallback New_Callback { get; set; }

    MudTable<DashboardModel>? mudTableRef;
    int pages;

    protected override void OnAfterRender(bool firstRender)
    {
        if (mudTableRef != null)
            pages = ((mudTableRef.GetFilteredItemsCount() + mudTableRef.RowsPerPage - 1) / mudTableRef.RowsPerPage);
        base.OnAfterRender(firstRender);
    }

    void Add_Click()
    {

    }

    void EditAsync(DashboardModel model)
    {

    }

    void DeleteAsync_Click(DashboardModel model)
    {

    }

    void PageChanged()
    {

    }
}