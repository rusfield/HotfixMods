@using HotfixMods.Infrastructure.Extensions

@inject IDialogService DialogService


@code {
    [Parameter]
    public PageTab PageTab { get; set; }

    protected async void NewAsync_Click<TDialog>()
        where TDialog : ComponentBase
    {
        var result = await DialogService.Show<TDialog>().Result;
        if (!result.Cancelled && result.Data != null)
        {
            PageTab.Dto = result.Data;
            PageTab.TabName = ((BaseDto)result.Data).DisplayName;
            this.StateHasChanged();
        }
    }

    protected async void ValueCompareAsync_Click<TDialog>(DialogParameters? parameters = null)
        where TDialog : ComponentBase
    {
        var result = await DialogService.Show<TDialog>(null, parameters ?? new DialogParameters()).Result;
        if (!result.Cancelled && result.Data != null)
        {
            PageTab.DtoCompare = result.Data;
            this.StateHasChanged();
        }
    }
}
