@using HotfixMods.Infrastructure.Razor.Handlers;

@inject IDialogService DialogService


@code {
    [Parameter]
    public PageTab PageTab { get; set; }

    protected async void NewAsync_Click<TDialog>()
        where TDialog : ComponentBase
    {
        var result = await DialogService.Show<TDialog>().Result;
        if (!result.Cancelled && result.Data != null)
        {
            var pageTab = new PageTab(((DtoBase)result.Data).DisplayName, this.GetType());
            pageTab.Dto = result.Data;
            GlobalHandler.LaunchTab(pageTab);
        }
    }

    protected async void ValueCompareAsync_Click<TDialog>(DialogParameters? parameters = null)
        where TDialog : ComponentBase
    {
        var result = await DialogService.Show<TDialog>(null, parameters ?? new DialogParameters()).Result;
        if (!result.Cancelled && result.Data != null)
        {
            PageTab.DtoCompare = result.Data;
            this.StateHasChanged();
        }
    }
}
