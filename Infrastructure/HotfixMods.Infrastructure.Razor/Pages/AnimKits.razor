@using Infrastructure.Extensions
@using Core.Models.Db2

@if(null == PageTab.Dto)
{
    <TabContentView Data="new List<DashboardModel>()">
        </TabContentView>
}
else{
    <TabContentEditHeader IsUpdate="false" AddClick_Callback="AddSegment_Click" AddTooltip="Add new segment">
            <ChildContent>
                <MudTabPanel Text="Anim Kit">
                    <TabContentEditBody>
                        Hello
                    </TabContentEditBody>
                </MudTabPanel>
                @foreach (var (item, index) in ((AnimKitDto)PageTab.Dto).AnimKitSegments.WithIndex())
                {
                    <MudTabPanel Text="@($"Segment #{index + 1}")">
                        Segment tab
                    </MudTabPanel>
                }
            </ChildContent>
    </TabContentEditHeader>
}

@code {
    [Parameter]
    public PageTab PageTab { get; set; }

    void AddSegment_Click()
    {
        if(PageTab.Dto != null)
            ((AnimKitDto)PageTab.Dto).AnimKitSegments.Add(new AnimKitSegment());
    }
}