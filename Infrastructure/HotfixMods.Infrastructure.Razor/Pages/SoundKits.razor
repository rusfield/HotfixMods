@using HotfixMods.Infrastructure.Razor.Pages.SoundKitTabs
@using HotfixMods.Infrastructure.Razor.Pages.Shared

@inject SoundKitService Service
@inherits HotfixPageBase<SoundKitDto>

@if (null == PageTab.Dto)
{
    <TabContentView Data="new List<DashboardModel>()" NewAsync_Callback="NewAsync_Click<SoundKitSearch_Dialog>" Title="Sound Kits">
    </TabContentView>
}
else
{
    @*
    <TabContentEditHeader IsUpdate="false" Title="Sound Kits" ValueCompare_Callback="@(async () => ValueCompareAsync_Click<SoundKitSearch_Dialog>())">
        <ChildContent>
            <MudTabPanel Class="custom-mud-tabs">
                <TabContent>
                    <TabTitle_Element Line1="HotfixMods" Line2="Entity" />
                </TabContent>
                <ChildContent>
                    <TabContentEditBody T="object">
                        <HotfixModsEntity_Tab Value="((SoundKitDto)PageTab.Dto).Entity" @bind-IsUpdate="((SoundKitDto)PageTab.Dto).IsUpdate" />
                    </TabContentEditBody>
                </ChildContent>
            </MudTabPanel>
            <MudTabPanel Class="custom-mud-tabs">
                <TabContent>
                    <TabTitle_Element Line1="Sound" Line2="Kit" />
                </TabContent>
                <ChildContent>
                    <TabContentEditBody T="SoundKitDto.EntryGroup" Instances="((SoundKitDto?)PageTab.Dto).EntryGroups" AmountOfPages="((SoundKitDto?)PageTab.Dto).EntryGroups.Count" @bind-CurrentInstance="currentEntryInstance">
                        @if (((SoundKitDto?)PageTab.Dto).EntryGroups.Any())
                        {
                            foreach ((var entry, int index) in ((SoundKitDto?)PageTab.Dto).EntryGroups.WithIndex())
                            {
                                <SoundKitEntry_Tab Value="entry.SoundKitEntry" ValueCompare="@(PageTab.DtoCompare != null && ((SoundKitDto?)PageTab.DtoCompare)?.EntryGroups.Count > index ? ((SoundKitDto?)PageTab.DtoCompare)?.EntryGroups[index].SoundKitEntry : null)" />
                            }
                        }
                        else
                        {
                            <TabContentNoData Text="There are no Sound Kit Entries yet." />
                        }
                    </TabContentEditBody>
                </ChildContent>
            </MudTabPanel>
        </ChildContent>
    </TabContentEditHeader>
    *@
}

@code {
    int currentEntryInstance = 1;
}