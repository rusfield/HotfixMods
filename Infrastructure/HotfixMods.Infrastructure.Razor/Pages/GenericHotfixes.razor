@using HotfixMods.Core.Models;
@inject IDialogService DialogService

@if(null == PageTab.Dto)
{
    <TabContentView Data="new List<DashboardModel>()" New_Callback="NewAsync_Click" />
}
else
{
    <TabContentEditHeader IsUpdate="false">
            <ChildContent>
                <MudTabPanel Text="@PageTab.TabName">
                    <TabContentEditBody>
                        Hello
                    </TabContentEditBody>
                </MudTabPanel>
            </ChildContent>
    </TabContentEditHeader>
}


@code {
    [Parameter]
    public PageTab PageTab { get; set; }

    async void NewAsync_Click()
    {
        var result = await DialogService.Show<GenericHotfixSearch_Dialog>().Result;
        if(!result.Cancelled && result.Data != null)
        {
            PageTab.Dto = result.Data;
            PageTab.TabName = ((DbRow)result.Data).DbName;
            this.StateHasChanged();
        }
    }
}