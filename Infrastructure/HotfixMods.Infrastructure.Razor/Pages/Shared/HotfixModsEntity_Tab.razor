@using HotfixMods.Infrastructure.InfoModels
@inherits HotfixPageTabBase<HotfixModsEntity>
@inject IDialogService DialogService

<MudCarouselItem Transition="TransitionHandler.Transition" CustomTransitionEnter="@TransitionHandler.EnterTransition" CustomTransitionExit="@TransitionHandler.ExitTransition">
    <MudGrid>
        <MudItem xs="3" />
        <MudItem xs="6">
            <Placeholder_Element Amount="4" />
            <Input_Element @bind-Value="Value.Name" Label="@nameof(HotfixModsEntity.Name)" Variant="Variant.Text" />
            <InlineGroup Merged="false" LeftContentWidth="15" RightContentWidth="15" MiddleContentWidth="70">
                <LeftContent />
                <MiddleContent>
                    <Input_Element T="bool" Label="ID" OnInfoAdornmentClick="@(OpenInfoDialog(HotfixModsEntityInfo.Id))" Disabled="@(Value.RecordId <= 0)" AllowUndefinedValues="false" GetOptionsAsync_Func="GetOptions" @bind-Value="IsUpdate" />
                </MiddleContent>
                <RightContent />
            </InlineGroup>
        </MudItem>
        <MudItem xs="3" />
    </MudGrid>
</MudCarouselItem>

@code {
    [Parameter]
    public bool IsUpdate { get; set; }

    [Parameter]
    public EventCallback<bool> IsUpdateChanged { get; set; }

    async Task<Dictionary<bool, string>> GetOptions()
    {
        return new() {
            { true, $"{Value.RecordId} (update existing)" },
            { false, "New (generated after save)"}
        };
    }

    async Task UpdateChanged(bool newValue)
    {
        IsUpdate = newValue;
        await IsUpdateChanged.InvokeAsync(IsUpdate);
    }
}