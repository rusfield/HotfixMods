@inherits HotfixPageTabBase<HotfixModsEntity>
@inject AnimKitService Service
@inject IDialogService DialogService

<MudGrid>
    <MudItem xs="3">
        <IntInput_Element Label="ID" @bind-Value="Value.RecordId" AdornmentIcon="@Icons.Filled.Refresh" OnAdornmentClick="NextIdAsync_Click" />
        <Invisible_Element Amount="3" />
    </MudItem>
    <MudItem xs="9" />
    <MudItem xs="3" />
    <MudItem xs="6">
        <TextInput_Element @bind-Value="Value.Name" Label="@nameof(HotfixModsEntity.Name)" />
    </MudItem>
    <MudItem xs="3" />
</MudGrid>


@code {
    async void NextIdAsync_Click()
    {
        var parameters = new DialogParameters();
        parameters.Add(nameof(IdButton_Dialog.GetNextIdAsync_Func), Service.GetNextIdAsync);
        var result = await DialogService.Show<IdButton_Dialog>(null, parameters).Result;
        if (!result.Cancelled && result.Data != null)
        {
            var id = (int)result.Data;
            if (id > 0)
            {
                Value.RecordId = id;
                this.StateHasChanged();
            }
        }
    }
}