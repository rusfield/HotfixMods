@if (InstanceData.InstanceCount <= 0)
{
    <MudText Style="width:100%;height:100%;" Align="Align.Center">Nicht</MudText>
}
else
{
    <MudCarousel Style="width:100%; height:640px" TData="object" ShowArrows="false" ShowBullets="false" AutoCycle="false" SelectedIndexChanged="NavigateInstance" SelectedIndex="InstanceData.CurrentInstance - 1">
        @for (int i = 0; i<InstanceData.InstanceCount; i++)
        {
            int index = i;
            <MudCarouselItem Transition="Transition" CustomTransitionEnter="transition-instance" CustomTransitionExit="transition-fade">
                <CascadingValue Name="GroupIndex" Value="index">
                    <MudGrid Class="px-6 mt-7">
                        @ChildContent
                    </MudGrid>
                </CascadingValue>
            </MudCarouselItem>
        }
    </MudCarousel>
}


@code {
    [CascadingParameter(Name = "InstanceData")]
    public InstanceData InstanceData { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public Transition Transition { get; set; }

    [Parameter]
    public EventCallback<Transition> TransitionChanged { get; set; }

    bool first = true;

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
    }

    void NavigateInstance(int newIndex)
    {
        if (first)
        {
            first = false;
        }
        else
        {
            Transition = Transition.Custom;
            TransitionChanged.InvokeAsync(Transition);
        }
    }
}